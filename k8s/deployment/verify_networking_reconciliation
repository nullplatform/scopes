#!/bin/bash

echo "üîç Verifying networking reconciliation for DNS type: $DNS_TYPE"

# Detect if using Istio HTTPRoute based on INITIAL_INGRESS_PATH
if echo "$INITIAL_INGRESS_PATH" | grep -qi "httproute\|istio"; then
  echo "üîç Detected Istio HTTPRoute configuration, using HTTPRoute reconciliation"
  source "$SERVICE_PATH/deployment/verify_http_route_reconciliation"
else
  case "$DNS_TYPE" in
    route53)
      source "$SERVICE_PATH/deployment/verify_ingress_reconciliation"
      ;;
    *)
      echo "‚ö†Ô∏è Ingress reconciliation not available for DNS type: $DNS_TYPE, skipping"
      ;;
  esac
fi
