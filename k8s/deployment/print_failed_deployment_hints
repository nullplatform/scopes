#!/bin/bash

HEALTH_CHECK_PATH=$(echo "$CONTEXT" | jq -r .scope.capabilities.health_check.path)
REQUESTED_MEMORY=$(echo "$CONTEXT" | jq -r .scope.capabilities.ram_memory)
SCOPE_NAME=$(echo "$CONTEXT" | jq -r .scope.name)
SCOPE_DIMENSIONS=$(echo "$CONTEXT" | jq -r .scope.dimensions)

echo ""
echo "‚ö†Ô∏è  Application Startup Issue Detected"
echo ""
echo "üí° Possible causes:"
echo "   Your application was unable to start within the expected timeframe"
echo ""
echo "üîß How to fix:"
echo "   1. Port Configuration: Ensure your application listens on port 8080"
echo "   2. Health Check Endpoint: Verify your app responds to: $HEALTH_CHECK_PATH"
echo "   3. Application Logs: Review logs for startup errors (database connections,"
echo "      missing dependencies, or initialization errors)"
echo "   4. Memory Allocation: Current allocation is ${REQUESTED_MEMORY}Mi - increase if needed"
echo "   5. Environment Variables: Verify all required variables are configured in"
echo "      parameters for scope '$SCOPE_NAME' or dimensions: $SCOPE_DIMENSIONS"
echo ""