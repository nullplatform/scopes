#!/bin/bash

# Build DNS context based on DNS_TYPE
# This script sets up the necessary environment variables for DNS management

case "$DNS_TYPE" in
  route53)
    # For Route53, we need to get hosted zone IDs
    source "$SERVICE_PATH/scope/networking/dns/get_hosted_zones"
    ;;
  azure)
    # Set default gateway type to istio if not specified
    GATEWAY_TYPE="${GATEWAY_TYPE:-istio}"
    export GATEWAY_TYPE
    ;;
  external_dns)
    echo "external_dns context ready"
    echo "DNS records will be managed automatically by External DNS operator"
    ;;
  *)
    echo "Error: Unsupported DNS type '$DNS_TYPE'"
    exit 1
    ;;
esac