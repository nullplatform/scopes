#!/bin/bash
# Check: Service Existence
# Verifies that service resources exist in the namespace

SERVICES=$(jq -r '.items[].metadata.name' "$SERVICES_FILE" 2>/dev/null | tr '\n' ' ')

if [[ -z "$SERVICES" ]]; then
    print_error "No services found with labels $LABEL_SELECTOR in namespace $NAMESPACE"
    print_info "  Action: Create service resource or verify label selectors"
    update_check_result --status "failed" --evidence "{}"
    return 1
fi

SERVICE_COUNT=$(echo "$SERVICES" | wc -w)
print_success "Found $SERVICE_COUNT service(s): $SERVICES"
update_check_result --status "success" --evidence "{}"
