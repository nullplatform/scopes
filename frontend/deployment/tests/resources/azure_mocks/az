#!/bin/bash
# Mock az CLI for testing
# Set AZ_MOCK_RESPONSE to the path of the mock file to return
# Set AZ_MOCK_EXIT_CODE to the exit code (default: 0)

if [ -z "$AZ_MOCK_RESPONSE" ]; then
  echo "AZ_MOCK_RESPONSE not set" >&2
  exit 1
fi

if [ -f "$AZ_MOCK_RESPONSE" ]; then
  cat "$AZ_MOCK_RESPONSE"
else
  echo "Mock file not found: $AZ_MOCK_RESPONSE" >&2
  exit 1
fi

exit "${AZ_MOCK_EXIT_CODE:-0}"
